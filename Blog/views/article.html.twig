{% extends 'layout.html.twig' %}
{% block title %} {{ parent() ~ article.titre }}  {% endblock %}
{% block content %}
    <div class="row">
        <div class="col-md-10 col-md-offset-1">
            <article>
                <h2> {{ article.titre }} </h2>
                <p> {{ article.contenu }}</p>
                <h3>Comments</h3>
                {% for comment in comments %}
                    <strong>{{ comment.author.username }}</strong> said : {{ comment.content }}<br>
                {% else %}
                    No comments yet.
                {% endfor %}

                <h3>Add a comment</h3>
                {% for flashMessage in app.session.flashbag.get('success') %}
                    <div class="alert alert-success">
                        {{ flashMessage }}
                    </div>
                {% endfor %}
                {% if commentForm %}
                    {{ form_start(commentForm) }}
                    <div class="form-group">
                        {{ form_errors(commentForm.content) }}
                        {{ form_widget(commentForm.content, { 'attr':  {
                            'rows': '4',
                            'class': 'form-control',
                            'placeholder': 'Enter your comment'
                        }}) }}
                    </div>
                    <div class="form-group">
                        <input type="submit" class="btn btn-primary" value="Publish comment" />
                    </div>
                    {{ form_end(commentForm) }}
                {% else %}
                    <a href="{{ path('login') }} ">Log in</a> to add comments.
                {% endif %}

            </article>
        </div>
    </div>

{% endblock %}